<template>
  <div id="app">
    <header>
      <div class="container">
        <div class="row">
          <div class="col-auto logo">
            <router-link :to="{ name: 'home' }">
              <svg viewBox="0 0 375 171.2" xmlns="http://www.w3.org/2000/svg">
                <g
                  transform="matrix(4.750252, 0, 0, 4.75, 70.940392, -57.80912)"
                  class="aLgOaV3zRcolors-0R9fBKofav"
                  style="fill: rgb(255, 0, 0)"
                >
                  <path
                    d="M44.601,24.446c-5.053-1.386-7.614,2.364-9.897,3.53c-6.25,2.853-12.019-1.103-14.292-3.955 c-1.871-2.341-5.526-5.28-6.78-6.261c-0.269-0.208-0.629-0.254-0.939-0.118l-1.924,0.826c-0.25,0.11-0.523,0.064-0.78-0.022 c-1.943-0.655-4.045-2.489-3.852-3.53c0.287-1.772,1.617-1.504,2.313-1.118c0.311-0.424,0.387-0.886,0.349-1.352 c-1.644-0.731-2.818,0.076-3.473,1.432c-0.947,2.545,1.042,4.973,1.391,5.59c0.344,0.618-0.08,1.118-1.008,1.659 c-0.924,0.542-1.155,2.159,0.622,4.978c3.666,6.598,13.424,8.182,15.242,8.644c1.811,0.462,4.549,0.537,7.25,0.382 c8.833-1.076,10.992-5.9,11.728-7.754c0.734-1.848,2.932-2.199,3.704-1.965C45.024,25.643,45.293,24.715,44.601,24.446z M25.002,28.882c-0.735-0.228-5.541-2.804-8.644-6.557c-2.201-2.352-3.394-2.697-4.166-2.625c-0.773,0.076-2.66,0.542-2.625,0.197 c0,0,2.276-1.159,2.701-1.353c0.424-0.193,0.924-0.076,1.507,0.307c0.576,0.386,2.853,2.182,4.94,4.795 c2.288,2.333,5.552,5.007,7.056,5.235C26.002,29.116,25.729,29.116,25.002,28.882z"
                  ></path>
                </g>
                <path
                  d="M 36.456 170.681 L 10.212 170.681 C 9.541 170.681 8.818 170.602 8.044 170.443 C 7.27 170.285 6.505 170.037 5.75 169.702 C 4.994 169.366 4.271 168.932 3.581 168.401 C 2.891 167.869 2.28 167.226 1.749 166.47 C 1.217 165.715 0.793 164.838 0.476 163.84 C 0.159 162.842 0 161.719 0 160.469 L 0 140.772 C 0 140.1 0.079 139.378 0.238 138.604 C 0.396 137.83 0.644 137.065 0.979 136.309 C 1.315 135.554 1.753 134.831 2.294 134.141 C 2.835 133.451 3.483 132.84 4.239 132.308 C 4.994 131.777 5.866 131.353 6.855 131.035 C 7.843 130.718 8.962 130.56 10.212 130.56 L 36.456 130.56 L 36.456 137.834 L 10.212 137.834 C 9.261 137.834 8.533 138.086 8.03 138.59 C 7.526 139.093 7.274 139.839 7.274 140.828 L 7.274 160.469 C 7.274 161.401 7.531 162.124 8.044 162.637 C 8.557 163.15 9.28 163.407 10.212 163.407 L 36.456 163.407 Z M 84.842 154.453 C 84.842 156.897 84.422 159.145 83.583 161.196 C 82.743 163.248 81.578 165.02 80.086 166.512 C 78.593 168.004 76.826 169.165 74.784 169.996 C 72.741 170.826 70.517 171.241 68.111 171.241 L 58.262 171.241 C 55.856 171.241 53.627 170.826 51.575 169.996 C 49.524 169.165 47.752 168.004 46.26 166.512 C 44.767 165.02 43.597 163.248 42.748 161.196 C 41.9 159.145 41.475 156.897 41.475 154.453 L 41.475 146.787 C 41.475 144.363 41.9 142.12 42.748 140.059 C 43.597 137.997 44.767 136.225 46.26 134.743 C 47.752 133.26 49.524 132.099 51.575 131.259 C 53.627 130.42 55.856 130 58.262 130 L 68.111 130 C 70.517 130 72.741 130.42 74.784 131.259 C 76.826 132.099 78.593 133.26 80.086 134.743 C 81.578 136.225 82.743 137.997 83.583 140.059 C 84.422 142.12 84.842 144.363 84.842 146.787 Z M 77.567 146.787 C 77.567 145.351 77.339 144.05 76.882 142.884 C 76.425 141.719 75.782 140.721 74.951 139.891 C 74.121 139.061 73.124 138.417 71.958 137.96 C 70.792 137.503 69.51 137.275 68.111 137.275 L 58.262 137.275 C 56.845 137.275 55.553 137.503 54.387 137.96 C 53.222 138.417 52.219 139.061 51.38 139.891 C 50.54 140.721 49.892 141.719 49.435 142.884 C 48.978 144.05 48.75 145.351 48.75 146.787 L 48.75 154.453 C 48.75 155.89 48.978 157.191 49.435 158.356 C 49.892 159.522 50.54 160.52 51.38 161.35 C 52.219 162.18 53.222 162.824 54.387 163.281 C 55.553 163.738 56.845 163.966 58.262 163.966 L 68.055 163.966 C 69.472 163.966 70.764 163.738 71.93 163.281 C 73.096 162.824 74.098 162.18 74.937 161.35 C 75.777 160.52 76.425 159.522 76.882 158.356 C 77.339 157.191 77.567 155.89 77.567 154.453 Z M 134.152 154.453 C 134.152 156.897 133.733 159.145 132.893 161.196 C 132.054 163.248 130.888 165.02 129.396 166.512 C 127.904 168.004 126.136 169.165 124.094 169.996 C 122.052 170.826 119.827 171.241 117.421 171.241 L 107.573 171.241 C 105.167 171.241 102.938 170.826 100.886 169.996 C 98.834 169.165 97.062 168.004 95.57 166.512 C 94.078 165.02 92.907 163.248 92.059 161.196 C 91.21 159.145 90.786 156.897 90.786 154.453 L 90.786 146.787 C 90.786 144.363 91.21 142.12 92.059 140.059 C 92.907 137.997 94.078 136.225 95.57 134.743 C 97.062 133.26 98.834 132.099 100.886 131.259 C 102.938 130.42 105.167 130 107.573 130 L 117.421 130 C 119.827 130 122.052 130.42 124.094 131.259 C 126.136 132.099 127.904 133.26 129.396 134.743 C 130.888 136.225 132.054 137.997 132.893 140.059 C 133.733 142.12 134.152 144.363 134.152 146.787 Z M 126.878 146.787 C 126.878 145.351 126.649 144.05 126.192 142.884 C 125.735 141.719 125.092 140.721 124.262 139.891 C 123.432 139.061 122.434 138.417 121.268 137.96 C 120.102 137.503 118.82 137.275 117.421 137.275 L 107.573 137.275 C 106.155 137.275 104.863 137.503 103.698 137.96 C 102.532 138.417 101.529 139.061 100.69 139.891 C 99.851 140.721 99.202 141.719 98.746 142.884 C 98.289 144.05 98.06 145.351 98.06 146.787 L 98.06 154.453 C 98.06 155.89 98.289 157.191 98.746 158.356 C 99.202 159.522 99.851 160.52 100.69 161.35 C 101.529 162.18 102.532 162.824 103.698 163.281 C 104.863 163.738 106.155 163.966 107.573 163.966 L 117.365 163.966 C 118.783 163.966 120.074 163.738 121.24 163.281 C 122.406 162.824 123.409 162.18 124.248 161.35 C 125.087 160.52 125.735 159.522 126.192 158.356 C 126.649 157.191 126.878 155.89 126.878 154.453 Z M 183.39 170.681 L 173.066 170.681 L 156.698 154.286 L 151.578 154.286 L 151.578 146.955 L 156.698 146.955 L 173.066 130.56 L 183.39 130.56 L 162.77 150.62 Z M 148.668 170.681 L 141.394 170.681 L 141.394 130.56 L 148.668 130.56 Z M 227.986 161.868 C 227.986 162.763 227.832 163.724 227.524 164.75 C 227.217 165.775 226.713 166.727 226.014 167.603 C 225.314 168.48 224.405 169.212 223.286 169.8 C 222.167 170.387 220.796 170.681 219.173 170.681 L 191.558 170.681 C 191.036 170.681 190.551 170.588 190.103 170.401 C 189.656 170.215 189.269 169.958 188.942 169.632 C 188.616 169.305 188.359 168.918 188.173 168.471 C 187.986 168.023 187.893 167.538 187.893 167.016 L 187.893 134.225 C 187.893 133.721 187.986 133.246 188.173 132.798 C 188.359 132.35 188.616 131.959 188.942 131.623 C 189.269 131.287 189.656 131.026 190.103 130.84 C 190.551 130.653 191.036 130.56 191.558 130.56 L 215.899 130.56 C 216.795 130.56 217.755 130.718 218.781 131.035 C 219.807 131.353 220.763 131.861 221.649 132.56 C 222.535 133.26 223.272 134.169 223.859 135.288 C 224.447 136.407 224.741 137.778 224.741 139.401 L 224.741 140.772 C 224.741 142.059 224.526 143.444 224.097 144.927 C 223.668 146.41 222.978 147.813 222.027 149.138 C 222.847 149.641 223.617 150.247 224.335 150.956 C 225.053 151.665 225.683 152.486 226.223 153.418 C 226.764 154.351 227.193 155.405 227.51 156.58 C 227.828 157.755 227.986 159.051 227.986 160.469 Z M 220.712 160.469 C 220.712 159.518 220.562 158.664 220.264 157.909 C 219.966 157.153 219.546 156.505 219.005 155.964 C 218.464 155.423 217.811 155.008 217.047 154.719 C 216.282 154.43 215.424 154.286 214.472 154.286 L 198.077 154.286 L 198.077 146.955 L 211.199 146.955 C 212.15 146.955 213.008 146.811 213.773 146.522 C 214.538 146.232 215.191 145.817 215.732 145.277 C 216.272 144.736 216.687 144.087 216.977 143.332 C 217.266 142.577 217.41 141.723 217.41 140.772 L 217.41 139.401 C 217.41 138.356 216.907 137.834 215.899 137.834 L 195.167 137.834 L 195.167 163.407 L 219.173 163.407 C 219.303 163.407 219.462 163.397 219.649 163.379 C 219.835 163.36 220.003 163.304 220.152 163.211 C 220.301 163.117 220.432 162.959 220.544 162.735 C 220.656 162.511 220.712 162.204 220.712 161.812 Z M 276.411 154.453 C 276.411 156.897 275.991 159.145 275.152 161.196 C 274.313 163.248 273.147 165.02 271.655 166.512 C 270.163 168.004 268.395 169.165 266.353 169.996 C 264.31 170.826 262.086 171.241 259.68 171.241 L 249.831 171.241 C 247.425 171.241 245.196 170.826 243.145 169.996 C 241.093 169.165 239.321 168.004 237.829 166.512 C 236.337 165.02 235.166 163.248 234.317 161.196 C 233.469 159.145 233.044 156.897 233.044 154.453 L 233.044 146.787 C 233.044 144.363 233.469 142.12 234.317 140.059 C 235.166 137.997 236.337 136.225 237.829 134.743 C 239.321 133.26 241.093 132.099 243.145 131.259 C 245.196 130.42 247.425 130 249.831 130 L 259.68 130 C 262.086 130 264.31 130.42 266.353 131.259 C 268.395 132.099 270.163 133.26 271.655 134.743 C 273.147 136.225 274.313 137.997 275.152 140.059 C 275.991 142.12 276.411 144.363 276.411 146.787 Z M 269.137 146.787 C 269.137 145.351 268.908 144.05 268.451 142.884 C 267.994 141.719 267.351 140.721 266.521 139.891 C 265.691 139.061 264.693 138.417 263.527 137.96 C 262.361 137.503 261.079 137.275 259.68 137.275 L 249.831 137.275 C 248.414 137.275 247.122 137.503 245.956 137.96 C 244.791 138.417 243.788 139.061 242.949 139.891 C 242.109 140.721 241.461 141.719 241.004 142.884 C 240.547 144.05 240.319 145.351 240.319 146.787 L 240.319 154.453 C 240.319 155.89 240.547 157.191 241.004 158.356 C 241.461 159.522 242.109 160.52 242.949 161.35 C 243.788 162.18 244.791 162.824 245.956 163.281 C 247.122 163.738 248.414 163.966 249.831 163.966 L 259.624 163.966 C 261.042 163.966 262.333 163.738 263.499 163.281 C 264.665 162.824 265.667 162.18 266.507 161.35 C 267.346 160.52 267.994 159.522 268.451 158.356 C 268.908 157.191 269.137 155.89 269.137 154.453 Z M 325.722 154.453 C 325.722 156.897 325.302 159.145 324.462 161.196 C 323.623 163.248 322.457 165.02 320.965 166.512 C 319.473 168.004 317.706 169.165 315.663 169.996 C 313.621 170.826 311.397 171.241 308.99 171.241 L 299.142 171.241 C 296.736 171.241 294.507 170.826 292.455 169.996 C 290.403 169.165 288.631 168.004 287.139 166.512 C 285.647 165.02 284.477 163.248 283.628 161.196 C 282.779 159.145 282.355 156.897 282.355 154.453 L 282.355 146.787 C 282.355 144.363 282.779 142.12 283.628 140.059 C 284.477 137.997 285.647 136.225 287.139 134.743 C 288.631 133.26 290.403 132.099 292.455 131.259 C 294.507 130.42 296.736 130 299.142 130 L 308.99 130 C 311.397 130 313.621 130.42 315.663 131.259 C 317.706 132.099 319.473 133.26 320.965 134.743 C 322.457 136.225 323.623 137.997 324.462 140.059 C 325.302 142.12 325.722 144.363 325.722 146.787 Z M 318.447 146.787 C 318.447 145.351 318.219 144.05 317.762 142.884 C 317.305 141.719 316.661 140.721 315.831 139.891 C 315.001 139.061 314.003 138.417 312.837 137.96 C 311.672 137.503 310.389 137.275 308.99 137.275 L 299.142 137.275 C 297.724 137.275 296.433 137.503 295.267 137.96 C 294.101 138.417 293.099 139.061 292.259 139.891 C 291.42 140.721 290.772 141.719 290.315 142.884 C 289.858 144.05 289.629 145.351 289.629 146.787 L 289.629 154.453 C 289.629 155.89 289.858 157.191 290.315 158.356 C 290.772 159.522 291.42 160.52 292.259 161.35 C 293.099 162.18 294.101 162.824 295.267 163.281 C 296.433 163.738 297.724 163.966 299.142 163.966 L 308.934 163.966 C 310.352 163.966 311.644 163.738 312.809 163.281 C 313.975 162.824 314.978 162.18 315.817 161.35 C 316.656 160.52 317.305 159.522 317.762 158.356 C 318.219 157.191 318.447 155.89 318.447 154.453 Z M 374.959 170.681 L 364.635 170.681 L 348.267 154.286 L 343.147 154.286 L 343.147 146.955 L 348.267 146.955 L 364.635 130.56 L 374.959 130.56 L 354.339 150.62 Z M 340.238 170.681 L 332.963 170.681 L 332.963 130.56 L 340.238 130.56 Z"
                  style="white-space: pre"
                ></path>
              </svg>
            </router-link>
          </div>
          <div class="col-12 col-lg-6 search">
            <form>
              <input type="text" />
              <button type="submit">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  class="bi bi-search"
                  viewBox="0 0 16 16"
                >
                  <path
                    d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"
                  />
                </svg>
              </button>
            </form>
          </div>
          <div class="col-auto sign-in" v-if="!userIsLoading && !authenticated">
            <router-link :to="{ name: 'login' }">Войти</router-link>
          </div>
          <div class="col-auto loader" v-if="userIsLoading">
            <my-spinner :size="25" />
          </div>
          <div class="col-auto user" v-if="!userIsLoading && authenticated">
            <router-link
              :to="{
                name: 'profile',
                params: { username: user.user_name },
              }"
            >
              <img :src="user.image" />
            </router-link>
          </div>
          <div class="col-auto burger">
            <a href="#">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-list"
                viewBox="0 0 16 16"
              >
                <path
                  fill-rule="evenodd"
                  d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"
                />
              </svg>
            </a>
          </div>
        </div>
      </div>
    </header>
    <nav>
      <div class="container">
        <menu-list></menu-list>
      </div>
    </nav>
    <router-view />
    <footer>
      <div class="container">
        <p>COPYRIGHT © 2021-2022 | ALL RIGHTS RESERVED.</p>
      </div>
    </footer>
  </div>
</template>

<script>
import { mapActions, mapGetters } from "vuex";
import MenuList from "@/components/MenuList";
import MySpinner from "@/components/MySpinner";

export default {
  components: {
    MenuList,
    MySpinner,
  },
  computed: {
    ...mapGetters("user", {
      authenticated: "authenticated",
      userIsLoading: "userIsLoading",
      user: "user",
    }),
  },
  methods: {
    ...mapActions("user", {
      loadUser: "loadUser",
    }),
  },
  async created() {
    await this.loadUser();
  },
};
</script>

<style>
* {
  padding: 0;
  margin: 0;
  box-sizing: border-box;
  font-family: "Roboto", sans-serif;
  scroll-behavior: smooth;
}

a {
  text-decoration: none;
  color: inherit;
}

ul li {
  list-style-type: none;
}

/* header */

header {
  padding: 20px 0;
}

header .row {
  align-items: center;
}

header .logo svg {
  width: 150px;
}

header .sign-in a {
  font-size: 16px;
  display: block;
  background-color: #ff4e00;
  color: #fff;
  padding: 9px 18px;
  border: 2px solid #ff4e00;
  transition: 0.3s;
}

header .sign-in a:hover {
  background-color: #fff;
  color: #ff4e00;
}

header .user {
  border-radius: 50%;
}

header .user a {
  display: block;
  width: 40px;
  height: 40px;
}

header .user a img {
  width: 100%;
  height: 100%;
}

header .search {
  order: 1;
  justify-self: flex-end;
}

header form input {
  width: 100%;
  padding: 10px 45px 10px 12px;
  border: 1px solid #ced4da;
  outline: 0;
  transition: 0.15s;
  font-size: 100%;
}

header form input:focus {
  color: #222;
  border-color: #80bdff;
}

header form {
  position: relative;
}

header form button svg {
  width: 16px;
  height: 16px;
}

header form button {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  border: none;
  background: 0 0;
  cursor: pointer;
  opacity: 0.6;
  transition: all 0.3s;
  height: 100%;
  width: 40px;
}

header form button:hover {
  opacity: 1;
}

header .burger svg {
  width: 32px;
  height: 32px;
}

@media (min-width: 992px) {
  header .search {
    order: 0;
    margin-left: auto;
  }
}

@media (max-width: 991px) {
  header .search {
    margin-top: 20px;
  }
  header .sign-in {
    margin-left: auto;
  }

  header .user {
    margin-left: auto;
  }
}

@media (min-width: 992px) {
  header .burger {
    display: none;
  }
}

/* header */

/* nav */

nav {
  box-shadow: 0 5px 45px -14px rgb(178 165 105 / 19%);
  border-top: 1px solid #f3f3f3;
  border-bottom: 1px solid #f3f3f3;
  display: none;
  background-color: #fff;
  position: relative;
  z-index: 20;
}

@media (min-width: 992px) {
  nav {
    display: block;
  }
}
/* nav */
/* footer */

footer {
  padding: 30px 0;
}

/* footer */
</style>
